import{_ as L,I as A,b as S,m as M,r as b,o as h,c as m,a as n,d as f,w as O,t as g,e as w,v as y,n as C,F as T,f as p,g as R,u as k,h as N,i as Y}from"./index.37b26f8e.js";import j from"./ModalPause.b7a266d0.js";const F="/assets/marker-red.fe11b85b.svg",G="/assets/marker-yellow.1c8b9ab4.svg",B="/assets/board-layer-black-large.70d3e573.svg",V="/assets/board-layer-white-large.e3245ab4.svg",P=6,W=7,c=1,u=2,H={name:"GameView",components:{ModalPause:j,Icon:A},computed:{getBgColor(){return this.winner===c?"#FD6687;":this.winner===u?"#FFCE67;":"#5C2DD5;"},getSeconds(){return Math.floor(this.seconds%60)},getMinutes(){return Math.floor(this.seconds/60)},getHours(){return Math.floor(this.seconds/60/60)},isUserOnPage(){document.addEventListener("visibilitychange",()=>document.hidden)},widthCircle(){if(document.documentElement.clientWidth>768)return 64;if(document.documentElement.clientWidth<=768&&document.documentElement.clientWidth>576)return 57;if(document.documentElement.clientWidth<=576&&document.documentElement.clientWidth>0)return 40},widthCirclePadding(){if(document.documentElement.clientWidth>768)return 24;if(document.documentElement.clientWidth<768&&document.documentElement.clientWidth>576)return 18;if(document.documentElement.clientWidth<576&&document.documentElement.clientWidth>0)return 10},widthFirstCirclePadding(){if(document.documentElement.clientWidth>768)return 20;if(document.documentElement.clientWidth<768&&document.documentElement.clientWidth>576)return 18;if(document.documentElement.clientWidth<576&&document.documentElement.clientWidth>0)return 10},...S(k,["modal"])},data(){return{ROWS:P,COLUMNS:W,PLAYER_ONE:c,PLAYER_TWO:u,game:[],markerPosition:0,activePlayer:c,winner:null,playerOneScore:0,playerTwoScore:0,timeActive:{seconds:0,minutes:0,hours:0},seconds:0,timeInterval:null,counter:{countRowOne:1,countRowTwo:1,countColumnOne:0,countColumnTwo:0,countDiagonalOne:0,countDiagonalTwo:0,countDiagonalRevertOne:0,countDiagonalRevertTwo:0},loading:!1,circleWidth:0,circleWidthPadding:0}},methods:{...M(k,["openModal","closeModal"]),onClick(o,i){if(!this.loading){let r=this.game.findLast(s=>!s[i]);r[i]=this.activePlayer,this.activePlayer=this.activePlayer===c?u:c,this.winner||this.checkWinNew()}},checkWinNew(){this.checkRows(),this.checkColumns(),this.checkDiagonalOne(),this.checkDiagonalTwo()},checkRows(){this.game.forEach((o,i)=>{this.counter.countRowOne=1,this.counter.countRowTwo=1,o.forEach((r,s)=>{if(r===c&&r===o[s+1]?this.counter.countRowOne++:r===u&&r===o[s+1]&&this.counter.countRowTwo++,this.counter.countRowOne===4){if(!this.winner)for(let e=s+1;e>=s-2&&e>=0;e--)setTimeout(()=>{this.$refs[`bg-animate-${i}-${e}`][0].classList.add("is-four")},1e3);this.setWinner(c)}else if(this.counter.countRowTwo===4){if(!this.winner)for(let e=s+1;e>=s-2&&e>=0;e--)setTimeout(()=>{this.$refs[`bg-animate-${i}-${e}`][0].classList.add("is-four")},1e3);this.setWinner(u)}})})},checkColumns(){this.countColumnOne=0,this.countColumnTwo=0,this.game.forEach((o,i)=>{o.forEach((r,s)=>{this.counter.countColumnOne=0,this.counter.countColumnTwo=0;for(let e=0,t=0;e<4&&t<4;e++)if(i+e<this.game.length&&s+t<o.length)if(r===c&&r===this.game[i+e][s]){if(this.counter.countColumnOne++,this.counter.countColumnOne===4){if(!this.winner)for(let a=e;a>=0;a--)setTimeout(()=>{this.$refs[`bg-animate-${i+a}-${s}`][0].classList.add("is-four")},1e3);this.setWinner(c)}}else if(r===u&&r===this.game[i+e][s]){if(this.counter.countColumnTwo++,this.counter.countColumnTwo===4){if(!this.winner)for(let a=e;a>=0;a--)setTimeout(()=>{this.$refs[`bg-animate-${i+a}-${s}`][0].classList.add("is-four")},1e3);this.setWinner(u)}}else this.counter.countColumnOne=0,this.counter.countColumnTwo=0})})},checkDiagonalOne(){this.countDiagonalOne=0,this.countDiagonalTwo=0,this.game.forEach((o,i)=>{o.forEach((r,s)=>{this.counter.countDiagonalOne=0,this.counter.countDiagonalTwo=0;for(let e=0,t=0;e<4&&t<4;e++,t++)if(i+e<this.game.length&&s+t<o.length)if(r===c&&r===this.game[i+e][s+t]){if(this.counter.countDiagonalOne++,this.counter.countDiagonalOne===4){if(!this.winner){let a=t;for(let l=e;l>=0;l--)setTimeout(()=>{this.$refs[`bg-animate-${i+l}-${s+a}`][0].classList.add("is-four"),a--},1e3)}this.setWinner(c)}}else if(r===u&&r===this.game[i+e][s+t]){if(this.counter.countDiagonalTwo++,this.counter.countDiagonalTwo===4){if(!this.winner){let a=t;for(let l=e;l>=0;l--)setTimeout(()=>{this.$refs[`bg-animate-${i+l}-${s+a}`][0].classList.add("is-four"),a--},1e3)}this.setWinner(u)}}else this.counter.countDiagonalOne=0,this.counter.countDiagonalTwo=0})})},checkDiagonalTwo(){this.countDiagonalRevertOne=0,this.countDiagonalRevertTwo=0,this.game.forEach((o,i)=>{o.forEach((r,s)=>{this.countDiagonalRevertOne=0,this.countDiagonalRevertTwo=0;for(let e=3,t=0;e>=0&&t<4;e--,t++)if(i+e<this.game.length&&s+t<o.length)if(s+3<o.length&&this.game[i][s+3]===c&&this.game[i][s+3]===this.game[i+e][s+t]){if(this.counter.countDiagonalRevertOne++,this.counter.countDiagonalRevertOne===4){this.setWinner(c);let a=t;for(let l=e;l<4&&l>=0;l++)setTimeout(()=>{this.$refs[`bg-animate-${i+l}-${s+a}`][0].classList.add("is-four"),a--},1e3)}}else if(s+3<o.length&&this.game[i][s+3]===u&&this.game[i][s+3]===this.game[i+e][s+t]){if(this.counter.countDiagonalRevertTwo++,this.counter.countDiagonalRevertTwo===4){this.setWinner(u);let a=t;for(let l=e;l<4&&l>=0;l++)setTimeout(()=>{this.$refs[`bg-animate-${i+l}-${s+a}`][0].classList.add("is-four"),a--},1e3)}}else this.counter.countDiagonalRevertOne=0,this.counter.countDiagonalRevertTwo=0})})},setWinner(o){clearInterval(this.timeInterval),this.winner=o,this.winner===c?this.playerOneScore++:this.playerTwoScore++},playAgain(){let o=document.querySelectorAll(".is-four");for(let i of o)i.classList.remove("is-four");this.winner=null,this.createArray(),this.seconds=0,this.countTime()},restart(){let o=document.querySelectorAll(".is-four");for(let i of o)i.classList.remove("is-four");clearInterval(this.timeInterval),this.openModal("ModalPause")},createArray(){for(let o=0;o<P;o++)this.game[o]=Array.apply(null,Array(W))},setCountInterval(){this.timeInterval=setInterval(()=>{this.seconds+=1},1e3)},countTime(){this.setCountInterval(),document.hidden&&clearInterval(this.timeInterval),document.addEventListener("visibilitychange",()=>{document.hidden?clearInterval(this.timeInterval):this.modal||this.setCountInterval()})},continueGame(){this.closeModal(),this.setCountInterval()},restartGame(){this.closeModal(),clearInterval(this.timeInterval),this.playAgain(),this.playerOneScore=0,this.playerTwoScore=0}},mounted(){this.createArray(),this.countTime(),window.addEventListener("continue-game",this.continueGame),window.addEventListener("restart-game",this.restartGame)}},U={class:"main-game"},q={class:"container"},z={class:"game-header"},J={class:"game-header__logo"},K=n("img",{src:Y,alt:"logo"},null,-1),Q={class:"game-wrap"},X={class:"game"},Z={class:"game__player"},$=n("div",{class:"game__player-title title title_s"},"PLAYER 1",-1),x={class:"game__player-score title title_l"},I={class:"game__field"},ee={class:"game__field-bg",ref:"game-field"},te=n("img",{src:B,alt:"background-dark",class:"game__field-bg-dark"},null,-1),ie=n("img",{src:V,alt:"background-light",class:"game__field-bg-light"},null,-1),se=["onClick","onMouseenter","disabled"],ne=n("div",{class:"game__field-info-bg"},null,-1),oe={class:"game__field-info-content"},ae={class:"game__field-info-title title title_xs title_light"},le={class:"game__field-info-counter title title_l title_light"},re={key:1,class:"game__field-win"},ce={class:"game__field-win-title title title_xs"},ue=n("div",{class:"title title_l"},"WINS",-1),he={class:"game__player"},me=n("div",{class:"game__player-title title title_s"},"PLAYER 2",-1),ge={class:"game__player-score title title_l"};function de(o,i,r,s,e,t){const a=b("router-link"),l=b("Icon");return h(),m("main",U,[n("div",q,[n("div",z,[f(a,{to:{name:"menu"},class:"btn-small"},{default:O(()=>[N("MENU")]),_:1}),n("div",J,[f(a,{to:{name:"menu"}},{default:O(()=>[K]),_:1})]),n("button",{onClick:i[0]||(i[0]=(..._)=>t.restart&&t.restart(..._)),class:"btn-small"},"RESTART")]),n("div",Q,[n("div",X,[n("div",Z,[f(l,{src:"player-one",width:"54",height:"59",class:"game__player-icon"}),$,n("div",x,g(e.playerOneScore),1)]),n("div",I,[w(n("img",{src:F,alt:"marker",style:C({left:88*e.markerPosition+"px"}),class:"game__field-marker"},null,4),[[y,e.activePlayer===e.PLAYER_ONE]]),w(n("img",{src:G,alt:"marker",style:C({left:88*e.markerPosition+"px"}),class:"game__field-marker"},null,4),[[y,e.activePlayer===e.PLAYER_TWO]]),n("div",ee,[te,ie,(h(!0),m(T,null,p(e.game,(_,E)=>(h(),m(T,null,[(h(!0),m(T,null,p(_,(d,v)=>(h(),m("button",{onClick:D=>t.onClick(E,v),onMouseenter:D=>e.markerPosition=v,class:R(["game__field-bg-circle",{animate:e.PLAYER_ONE===d||e.PLAYER_TWO===d}]),disabled:e.winner,style:C({top:(t.widthCircle+t.widthCirclePadding)*E+t.widthFirstCirclePadding+"px",left:(t.widthCircle+t.widthCirclePadding)*v+t.widthFirstCirclePadding+"px"})},[n("div",{class:R(["game__field-bg-animate",{"game__field-bg-animate_player-one":e.PLAYER_ONE===d,"game__field-bg-animate_player-two":e.PLAYER_TWO===d,animate:e.PLAYER_ONE===d||e.PLAYER_TWO===d}]),ref_for:!0,ref:`bg-animate-${E}-${v}`},[f(l,{src:"white-circle",width:"34",height:"34",class:"game__field-bg-icon"})],2)],46,se))),256))],64))),256))],512),e.winner?(h(),m("div",re,[n("div",ce,"PLAYER "+g(e.winner),1),ue,n("button",{onClick:i[1]||(i[1]=(..._)=>t.playAgain&&t.playAgain(..._)),class:"btn-small"},"PLAY AGAIN")])):(h(),m("div",{key:0,class:R(["game__field-info",{"game__field-info_minutes":t.getMinutes,"game__field-info_hours":t.getHours}])},[ne,n("div",oe,[n("div",ae,"PLAYER "+g(e.activePlayer)+"\u2019S TURN",1),n("div",le,[w(n("span",null,g(t.getHours)+"hr",513),[[y,t.getHours]]),w(n("span",null,g(t.getMinutes)+"m",513),[[y,t.getMinutes]]),n("span",null,g(t.getSeconds)+"s",1)])])],2))]),n("div",he,[f(l,{src:"player-two",width:"54",height:"59",class:"game__player-icon"}),me,n("div",ge,g(e.playerTwoScore),1)])])])]),n("div",{class:"main-game__bg",style:C(`background: ${t.getBgColor}`)},null,4)])}const ve=L(H,[["render",de]]);export{ve as default};
